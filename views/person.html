<go>template "base/base.html" .</go>
<go>define "head"</go>
<title>人员</title>
<go>end</go>
<go>define "body"</go>
<script>
var Persons = <go>.Persons</go>;
var Group = <go>.Group</go>;
</script>
<div class="panel panel-warning main-box" ng-controller="ctrl.person">
    <div class="panel-heading">嗯...</div>
    <div class="panel-body">
        <div class="flex">
            <div class="person-input">
                <div class="input-group">
                    <span class="input-group-addon">姓名</span>
                    <input type="text" class="form-control" ng-model="vm.ccperson.name">
                </div>
                <div class="flex">
                    <div class="input-group" style="width:200px;">
                        <span class="input-group-addon" my-color="vm.ccperson.color" style="color:#fff;cursor:pointer;background-color:{{vm.ccperson.color}};">颜色</span>
                        <input type="text" class="form-control" ng-model="vm.ccperson.color">
                    </div>
                    <div style="margin-left:10px;">
                        <select class="form-control" ng-model="vm.ccperson.group">
                            <option value="">属性</option>
                            <option ng-repeat="(k, g) in vm.group" value="{{k}}">{{g}}</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="person-input">
                <div class="input-group">
                    <span class="input-group-addon">登录</span>
                    <input type="text" class="form-control" ng-model="vm.ccperson.loginName">
                </div>
                <div class="input-group">
                    <span class="input-group-addon">密码</span>
                    <input type="password" class="form-control" ng-model="vm.ccperson.loginPass">
                </div>
            </div>
            <div class="flex-one" ng-cloak>
                <button ng-if="vm.ccperson.id==0" class="btn btn-default btn-block person-btn" my-tip="vm.ajaxing" ng-click="vm.doAdd()">新增</button>
                <button ng-if="vm.ccperson.id>0" class="btn btn-default btn-block person-btn" my-tip="vm.ajaxing" ng-click="vm.doUpdate()">更新</button>
            </div>
        </div>
    </div>

    <table  class="table" ng-cloak>
        <tr>
            <th>姓名</th>
            <th>所属</th>
            <th>登录名</th>
            <th>密码</th>
            <th>颜色</th>
            <th style="width:100px">操作</th>
        </tr>
        <tr ng-repeat="person in vm.persons">
            <td>{{person.name}}</td>
            <td>{{vm.group[person.group]}}</td>
            <td>{{person.loginName}}</td>
            <td><span data-pass="{{person.loginPass}}">******</span></td>
            <td><span class="person-color" style="background-color:{{person.color}};"></span></td>
            <td><button class="btn btn-info btn-xs" ng-click="vm.update(person.id)">编辑</button><button class="btn btn-danger btn-xs" ng-click="vm.doDelete(person.id)" style="margin-left:8px;">删除</button></td>
        </tr>
    </table>
</div>
<go>end</go>